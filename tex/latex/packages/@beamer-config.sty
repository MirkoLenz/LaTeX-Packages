\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{@beamer-config}


% \newif\if@metropolis\@metropolisfalse
\newif\if@focus\@focusfalse
\newif\if@dark\@darkfalse

% DEFAULT COLOR: Defined on page 44
% WHITE
\definecolor{fgColor}{HTML}{000000}
\definecolor{bgColor}{HTML}{FFFFFF}
\definecolor{highlightColor}{HTML}{afb7b6}
\definecolor{alertColor}{HTML}{EB811B}
\definecolor{exampleColor}{HTML}{14B03D}

\DeclareOption{white}{} % Default option
\DeclareOption{black}{
	\definecolor{fgColor}{HTML}{FFFFFF}
	\definecolor{bgColor}{HTML}{000000}
	\@darktrue
}
\DeclareOption{light}{
	\definecolor{fgColor}{HTML}{23373b}
	\definecolor{bgColor}{HTML}{fafafa}
}
\DeclareOption{dark}{
	\definecolor{fgColor}{HTML}{fafafa}
	\definecolor{bgColor}{HTML}{23373b}
	\@darktrue
}
\DeclareOption{metropolis}{\@metropolistrue}
\DeclareOption{focus}{\@focustrue}
\ProcessOptions\relax



% \if@metropolis
\usetheme[
	progressbar=frametitle,
	% sectionpage=none,
	subsectionpage=progressbar,
	titleformat frame=allsmallcaps,
	block=fill
]{metropolis}

\setbeamertemplate{section in toc}[sections numbered]
\usefonttheme{professionalfonts}

\setbeamercolor{normal text}{fg=fgColor,bg=bgColor}
\setbeamercolor{alerted text}{fg=alertColor}
\setbeamercolor{example text}{fg=exampleColor}

\setbeamercolor{palette primary}{fg=fgColor,bg=bgColor}
\setbeamercolor{framesource}{fg=fgColor}
\setbeamerfont{framesource}{size=\scriptsize}
% \fi

\if@focus
	\usetheme[numbering=progressbar,nofirafonts]{focus}
	\colorlet{main}{fgColor}
	\colorlet{background}{bgColor}
\fi


% \setlength{\leftmargini}{0pt}
\settowidth{\leftmargini}{\usebeamertemplate{itemize item}}
\addtolength{\leftmargini}{\labelsep}
\setlength\fboxsep{10pt}


\RequirePackage{multicol}


\RequirePackage{tikz}
\usetikzlibrary{shapes,arrows,positioning}

\tikzstyle{block} = [rectangle, draw, fill=fgColor, text=bgColor, font=\bfseries, text width=5em, text centered, rounded corners, minimum height=3em, ultra thick]
\tikzstyle{line} = [draw, -latex, ultra thick]



\RequirePackage[absolute,overlay]{textpos}

\newcommand{\footsourceW}{8cm}
\newcommand{\footsourceX}{8cm}
\newcommand{\footsourceY}{8cm}

\newcommand{\footsource}[1]{\begin{textblock*}{\footsourceW}(\footsourceX,\footsourceY)
	\begin{beamercolorbox}[ht=0.5cm,left]{framesource}
		\usebeamerfont{framesource}\usebeamercolor[fg]{framesource} \textbf{Source:} {#1}
	\end{beamercolorbox}
\end{textblock*}}

\newcommand{\source}[1]{
	\\[-.3em]
	{
		\footnotesize
		\textcolor{highlightColor}{#1}
	}
}

\newcommand{\icon}[1]{%
	\begin{center}
		\resizebox{!}{0.5\textwidth}{#1}
	\end{center}%
}


% Available modes: https://tex.stackexchange.com/questions/263440/what-are-the-available-modes-in-beamer
\mode<handout>{
	\PassOptionsToPackage{final}{pdfcomment}
}
\mode<beamer>{
	% \RequirePackage{pgfpages}
	% \setbeameroption{show notes on second screen}
}

\setbeamertemplate{note page}{\insertnote}

\RequirePackage{pdfcomment}

\newcommand{\pdfnote}[1]{
	\begin{textblock*}{1mm}(0mm,0mm)
		\pdfcomment[icon=note]{#1}
	\end{textblock*}
}
\newcommand{\n}{\textLF}
\newcommand{\tab}{\textHT}

\newcommand{\pdfmovie}[4]{\href{run:#1}{\framebox{\parbox[c][#3][c]{#2}{\center #4}}}}
% Example: \pdfmovie{720p25_pedestrian.mov}{6cm}{4cm}{H.264 avi}



\newcommand{\themedfile}[1]{%
	\if@dark%
		#1-dark%
	\else%
		#1-light%
	\fi%
}

\newcommand{\themedbox}[1]{%
	\if@dark
		\colorbox{fgColor}{#1}%
	\else%
		#1%
	\fi%
}

% https://tex.stackexchange.com/questions/29227/can-includegraphics-be-used-to-change-an-image-color
\newcommand{\themedcolor}[1]{%
	{\color{fgColor} #1}%
}
