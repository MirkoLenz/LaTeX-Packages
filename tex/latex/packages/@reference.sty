\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{@reference}


\newcommand{\bibparams}{}

\DeclareOption{authoryear}{\renewcommand{\bibparams}{style = authoryear, dashed = false, uniquelist = false}}
\DeclareOption{numeric}{\renewcommand{\bibparams}{style = numeric}}
\ProcessOptions\relax


\RequirePackage[
	backend = biber,
	\bibparams,
	% citestyle = authoryear-comp,
	maxnames = 2,
	% minnames = 1,
	giveninits = true,
	uniquename = init,
	date = year,
	url = false,
	isbn = false,
	sortcites = true,
]{biblatex}

\DeclareNameAlias{sortname}{family-given}


\if@beamer
\else
	\PassOptionsToPackage{noabbrev, capitalize}{cleveref}
\fi

\RequirePackage{cleveref}
\RequirePackage{acronym}


\if@beamer
	\renewcommand*{\bibfont}{\footnotesize}
	% \setbeamertemplate{bibliography item}[text]

	\setbeamertemplate{bibliography item}{
		\ifboolexpr{
			test {\ifentrytype{book}} or test {\ifentrytype{mvbook}}
			or test {\ifentrytype{collection}} or test {\ifentrytype{mvcollection}}
			or test {\ifentrytype{reference}} or test {\ifentrytype{mvreference}}
		}{\setbeamertemplate{bibliography item}[book]}
		{\ifentrytype{online}
			{\setbeamertemplate{bibliography item}[online]}
			{\setbeamertemplate{bibliography item}[article]}
		}
		\usebeamertemplate{bibliography item}
	}

	\defbibenvironment{bibliography}{
		\list{}{
			\settowidth{\labelwidth}{\usebeamertemplate{bibliography item}}%
			\setlength{\leftmargin}{\labelwidth}
			\setlength{\labelsep}{\biblabelsep - 1em}
			\addtolength{\leftmargin}{\labelsep}
			\setlength{\itemsep}{\bibitemsep + 1em}
			\setlength{\parsep}{\bibparsep}
		}
	}
	{\endlist}
	{\item}
\fi
